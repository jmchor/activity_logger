{{#if this.isDone}}

	<div class='row justify-content-center'>
		<div class='row'>
			<form class='col my-1' action='/schedule' method='POST'>
				<div class='col text-success'>
					<input
						type='checkbox'
						id='{{this._id}}'
						name='_id'
						value='{{this._id}}'
						checked
					/>
					<label id='{{this._id}}' for='{{this._id}}'>
						<a href='/schedule/{{this._id}}'>{{title}}</a>
					</label>
				</div>

				<div class='row'>
					<div class='col' id='task-description'>
						{{description}}
					</div>
				</div>
			</form>
		</div>

	</div>

{{else}}
	<div class='row justify-content-center'>

		<form class='col my-1' action='/schedule' method='POST'>
			<div class='col'>

				<input type='checkbox' id='{{this._id}}' name='_id' value='{{this._id}}' />
				<input type='hidden' name='isDone' value='{{this.isDone}}' />
				<label id='{{this._id}}' for='{{this._id}}'>
					<a
						href='/schedule/{{this._id}}'
						class='font-weight-bold'
						id='task-title'
					>{{title}}</a>
				</label>
				<div class='row'>
					<div class='col' id='task-description'>
						{{description}}
					</div>
				</div>
			</div>

		</form>
	</div>

{{/if}}

{{!-- prettier-ignore --}}
<script>

	// Submits the form and sends the id of the checkbox to the POST route

	window.onload = function () {
  const checkboxes = document.querySelectorAll('input[type="checkbox"]');
  checkboxes.forEach((checkbox) => {
    checkbox.addEventListener('change', function () {
      console.log(this.id);
      const form = checkbox.closest('form');
      if (this.checked) {
        form.submit();
      } else {
        // create a hidden input with the same name and value as the checkbox
        const hiddenInput = document.createElement('input');
        hiddenInput.type = 'hidden';
        hiddenInput.name = checkbox.name;
        hiddenInput.value = checkbox.value;
        // append the hidden input to the form and submit it
        form.appendChild(hiddenInput);
        form.submit();
      }
    });
  });
};


</script>